# Part 4 네트워크 장비

## 허브와 스위치

허브는 CSMA/CD 방식으로 통신하기 때문에 동시에 여러대의 PC가 통신에 참여 할 수 없음 ( Collision 발생)

- 콜리전 도메인을 나눠주기 위해 bridge 또는 switch 사용
- 초기에는 브리지 사용 했지만 브리지 보다 빠른 스위치가 나오면서 브리지는 대체 됨
- 포트별로 콜리지 도메인을 나움
- 즉, 허브는 1차선 도로, 스위치는 포트별로 차선이 나눠져 있는 도로
- 스위치는 콜리전 문제 해결이나 에러 처리 능력이 허브보다 우수함

## 브리지

- 콜리지 도메인을 나워서 충돌을 막음
- 요즘에는 이런 브리지의 기능을 스위치가 대신하기 때문에 브리지가 많이 사용 되지 않음

정리

허브 : 콜리지 도메인을 나누지 못함

브리지 : 콜리지 도메인을 나눌 수 있음

스위치 : 콜리지 도메인을 나눌수 있음

## 브리지/스위치의 기능

브리지와 스위치의 기능

- Learning : 배운다
- Flooding : 모르면 들어온 포트를 제외한 다른 포트로 뿌린다.
- Forwarding : 해당 포트로 건네준다.
- Filtering : 다른 포트로는 못건너가게 막는다.
- Aging : 나이를 먹는다.

### Learning

출발지의 맥 어드레스를 배움

- 브리지나 스위치는 자신에게 연결된 PC 'A' 에서 통신을 위해 프레임을 보내면 출발지의 맥 어드레스를 자신의 맥 어드레스 테이블(브리지 테이블)에 기록해 놓음.
- 만약  어떤 PC가 'A'에게 통신할 경우에는 자신의 브리지 테이블을 참고해서 다리르 건너게 할 것인지 결정함.

### Flooding

들어온 포트를 제외한 나머지 다른 포트에 뿌림

- 받은 프레임에 써 있는 맥 주소가 어디에 있는지 알지 못할 경우 다른 포트에 뿌림
  - 예를 들어 아직 한번도 프레임을 보내지 않은 PC는 같은 브리지에 연결되어 있더라도 맥 테이블에 맥 주소가 기록되어 있지 않음
  - 그럴경우 모든 포트에 전송해서 찾음

### Forwarding

브리지가 목적지의 맥 어드레스를 자신의 브리지 테이블에 가지고 있고, 이 목적지가 출발지의 맥 어드레스와 다른 세그먼트에 존재하는 경우. 즉, 다리를 건너가야하는 경우

- Flooding은 모든 포트로 프레임을 뿌림
- 브로드 캐스트, 멀티 캐스트 또는 Unknown에게 보낼 경우
- Forwarding은 해당하는 포트쪽에만 프레임 뿌림

### Filtering

브리지를 못넘어가게 막음

- 출발지와 도착지가 같은 세그먼트에 있는 경우
- 허브에는 존재하지 않는 기능

### Aging

저장 하고 있는 맥 주소를 얼마나 보관 할 것인지 결정

### 브리지와 스위치의 차이

브리지와 스위치 모두 데이터 링크 레이어에 속함

- 스위치는 하드웨어적 처리, 브리지는 소프트웨어적 차이(스위치는 ASIC으로 구현 됨)
- 스위치는 제공하는 포트수가 훨씬 많음
- 스위치는 에러 복구 능력이 있음(Store-and-forwarding 방식 또는 cut-through 방식)
  - Store-and-forwarding : 프레임을 다 받아들이고 오류를 확인 한뒤 전송 함
  - Cut-through : 프레임의 목적지 주소만 확인한 후 바로 전송 처리 시작 함
    - 빠르지만 오류 잡아내지 못함
- 브리지는 오직 Store-and-forwarding 방식만 사용 함
- 두가지 결합 -> Fragment-free

## Looping

프레임이 네트워크상에서 무한정으로 뱅뱅 도는 현상

- 경로가 여러개일때 멀티캐스팅이나 브로드캐스팅 할 경우 Flooding 발생해서 Looping발생 할 수 있음
- 스패닝 트리로 이 문제 해결 함